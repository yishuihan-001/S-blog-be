(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["detail"],{"4e14":function(t,e,a){},"71c2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-header-wrap bf"},[a("div",{staticClass:"com-header flex"},[a("h3",{staticClass:"h-title f20",on:{click:t.goHome}},[t._v("社区后台视频上传平台")]),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("img",{staticClass:"h-avatar",attrs:{src:t.defaultAvatar}}),t.isLogin?a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"userhome"}},[t._v("个人主页")]),a("el-dropdown-item",{attrs:{command:"createup"}},[t._v("新建博客")]),a("el-dropdown-item",{attrs:{command:"signOut"}},[t._v("退出登录")])],1):a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"login"}},[t._v("登录")]),a("el-dropdown-item",{attrs:{command:"register"}},[t._v("注册")])],1)],1)],1)])},s=[],r=(a("96cf"),a("1da1")),c=(a("cadf"),a("551c"),a("097d"),a("bdaa")),i={data:function(){return{defaultAvatar:"http://mp5.jmstatic.com/zengzhang/a6030869c5809c29d962a555cf744cbf.jpg"}},created:function(){this.initUerData()},mounted:function(){},components:{},computed:{isLogin:function(){return this.$store.state.isLogin}},methods:{handleCommand:function(t){switch(t){case"userhome":this.$router.push("/"+t);break;case"createup":this.$router.push("/"+t+"/new");break;case"login":case"register":this.$router.push("/"+t);break;case"signOut":this.signOut();break;default:break}},signOut:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].signout();case 3:if(e=t.sent,1!==+e.status){t.next=10;break}this.$store.commit("setLoginStatus",!1),this.$message("即将推出"),setTimeout(function(){a.$router.push("/login")},2e3),t.next=11;break;case 10:throw new Error(e.message);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),this.$message.error(t.t0.message||"退出失败，请重试");case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),initUerData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].userInfo();case 3:e=t.sent,1===+e.status&&(this.$store.commit("setLoginStatus",!0),this.$store.commit("setUserInfo",e.data)),t.next=10;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),goHome:function(){this.$router.push("/home")}},watch:{}},o=i,u=(a("b02f"),a("2877")),m=Object(u["a"])(o,n,s,!1,null,"4eb2c396",null);m.options.__file="header.vue";e["a"]=m.exports},a7b1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-article container"},[a("Header"),a("div",{staticClass:"a-main container-main bf"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("h2",{staticClass:"f20 fwb tac"},[t._v(t._s(t.essay.title))])])])],1),a("el-row",[a("el-col",{attrs:{span:1}},[a("div",{staticClass:"grid-content"},[a("div",{staticStyle:{"margin-top":"20px"}},[a("img",{staticClass:"a-avatar",attrs:{src:t.essay.author.avatarPre+t.essay.author.avatar}})])])]),a("el-col",{attrs:{span:23}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"a-con"},[a("p",{staticClass:"f16"},[t._v(t._s(t.essay.content))])]),t.comments.length?a("h1",{staticClass:"f18 fwb",staticStyle:{margin:"20px 0"}},[t._v("留言")]):t._e(),t.comments.length?a("div",{staticClass:"a-comment"},t._l(t.comments,function(t){return a("Comment",{key:t._id,attrs:{comment:t}})})):t._e(),a("div",{staticClass:"a-newcomment"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入留言"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",plain:""},on:{click:t.onSubmit}},[t._v("留言")])],1)])])],1)],1)],1)},s=[],r=(a("96cf"),a("1da1")),c=a("71c2"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-comment"},[a("el-row",[a("el-col",{attrs:{span:1}},[a("div",{staticClass:"grid-content"},[a("div",[a("img",{staticClass:"c-avatar",attrs:{src:t.comment.author.avatarPre+t.comment.author.avatar}})])])]),a("el-col",{attrs:{span:23}},[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"c-title flex"},[a("i",[t._v(t._s(t.comment.author.name))]),a("em",[t._v(t._s(t.comment.created_at))])]),a("div",{staticClass:"c-con"},[a("p",[t._v(t._s(t.comment.content))])])])])],1)],1)},o=[],u=(a("cadf"),a("551c"),a("097d"),{data:function(){return{defaultAvatar:"http://mp5.jmstatic.com/zengzhang/a6030869c5809c29d962a555cf744cbf.jpg"}},props:["comment"],created:function(){},mounted:function(){},components:{},computed:{},methods:{},watch:{}}),m=u,l=(a("b0df"),a("2877")),d=Object(l["a"])(m,i,o,!1,null,"7ad129f0",null);d.options.__file="comment.vue";var p=d.exports,h=a("bdaa"),f=window.va||{},v={data:function(){return{defaultAvatar:"http://mp5.jmstatic.com/zengzhang/a6030869c5809c29d962a555cf744cbf.jpg",textarea:"",essay:null,comments:[]}},created:function(){this.initArticleDetail(this.$route.params.articleId)},mounted:function(){},components:{Header:c["a"],Comment:p},computed:{},methods:{onSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.state.isLogin){t.next=3;break}return this.$message("登录后才评论哦"),t.abrupt("return");case 3:if(!f.isEmpty(this.textarea)){t.next=6;break}return this.$message("请输入评论"),t.abrupt("return");case 6:return e={content:this.textarea,postId:this.$route.params.articleId},t.prev=7,t.next=10,h["a"].createComment(e);case 10:a=t.sent,1===+a.status&&(this.$message("评论成功"),setTimeout(function(){window.location.reload()},1e3)),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](7),this.$message.error(t.t0.message);case 17:case"end":return t.stop()}},t,this,[[7,14]])}));return function(){return t.apply(this,arguments)}}(),initArticleDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["a"].getArticleDetail(e);case 3:if(a=t.sent,1!==+a.status){t.next=9;break}this.essay=a.data.article,this.comments=a.data.comments,t.next=10;break;case 9:throw new Error(a.message);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),this.$message.error(t.t0.message||"文章详情获取失败，请稍后重试");case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()},watch:{}},g=v,b=(a("b596"),Object(l["a"])(g,n,s,!1,null,"178e379a",null));b.options.__file="detail.vue";e["default"]=b.exports},b02f:function(t,e,a){"use strict";var n=a("4e14"),s=a.n(n);s.a},b0df:function(t,e,a){"use strict";var n=a("b1d0"),s=a.n(n);s.a},b1d0:function(t,e,a){},b596:function(t,e,a){"use strict";var n=a("d636"),s=a.n(n);s.a},d636:function(t,e,a){}}]);