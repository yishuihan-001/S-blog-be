(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["createup"],{"4e14":function(e,t,r){},6021:function(e,t,r){},"71c2":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"com-header-wrap bf"},[r("div",{staticClass:"com-header flex"},[r("h3",{staticClass:"h-title f20",on:{click:e.goHome}},[e._v("社区后台视频上传平台")]),r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[r("img",{staticClass:"h-avatar",attrs:{src:e.defaultAvatar}}),e.isLogin?r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"userhome"}},[e._v("个人主页")]),r("el-dropdown-item",{attrs:{command:"createup"}},[e._v("新建博客")]),r("el-dropdown-item",{attrs:{command:"signOut"}},[e._v("退出登录")])],1):r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"login"}},[e._v("登录")]),r("el-dropdown-item",{attrs:{command:"register"}},[e._v("注册")])],1)],1)],1)])},n=[],s=(r("96cf"),r("1da1")),i=(r("cadf"),r("551c"),r("097d"),r("bdaa")),o={data:function(){return{defaultAvatar:"http://mp5.jmstatic.com/zengzhang/a6030869c5809c29d962a555cf744cbf.jpg"}},created:function(){this.initUerData()},mounted:function(){},components:{},computed:{isLogin:function(){return this.$store.state.isLogin}},methods:{handleCommand:function(e){switch(e){case"userhome":this.$router.push("/"+e);break;case"createup":this.$router.push("/"+e+"/new");break;case"login":case"register":this.$router.push("/"+e);break;case"signOut":this.signOut();break;default:break}},signOut:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].signout();case 3:if(t=e.sent,1!==+t.status){e.next=10;break}this.$store.commit("setLoginStatus",!1),this.$message("即将推出"),setTimeout(function(){r.$router.push("/login")},2e3),e.next=11;break;case 10:throw new Error(t.message);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$message.error(e.t0.message||"退出失败，请重试");case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),initUerData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].userInfo();case 3:t=e.sent,1===+t.status&&(this.$store.commit("setLoginStatus",!0),this.$store.commit("setUserInfo",t.data)),e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),goHome:function(){this.$router.push("/home")}},watch:{}},c=o,u=(r("b02f"),r("2877")),m=Object(u["a"])(c,a,n,!1,null,"4eb2c396",null);m.options.__file="header.vue";t["a"]=m.exports},a4d9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-createup container"},[r("Header"),r("div",{staticClass:"c-main container-main bf"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v(e._s(e.btnTxt))])],1)],1)],1)],1)},n=[],s=(r("f751"),r("96cf"),r("1da1")),i=(r("cadf"),r("551c"),r("097d"),r("bdaa")),o=r("71c2"),c={data:function(){return{form:{title:"",content:""},rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}]},isEdit:"new"!==this.$route.params.articleId,btnTxt:"new"!==this.$route.params.articleId?"修改保存":"立即创建"}},created:function(){this.isEdit&&this.initArticleDetail(this.$route.params.articleId)},mounted:function(){},components:{Header:o["a"]},computed:{},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.isEdit?t.updateArticle("form"):t.createArticle("form")})},createArticle:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].createArticle(this.form);case 3:if(r=e.sent,1!==+r.status){e.next=9;break}this.$message("创建成功"),this.$refs[t].resetFields(),e.next=10;break;case 9:throw new Error(r.message);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message.error(e.t0.message||"创建失败，请稍后重试");case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),updateArticle:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].updateArticle(Object.assign({},this.form,{postId:this.$route.params.articleId}));case 3:if(r=e.sent,1!==+r.status){e.next=9;break}this.$message("修改成功"),this.$refs[t].resetFields(),e.next=10;break;case 9:throw new Error(r.message);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message.error(e.t0.message||"修改失败，请稍后重试");case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),initArticleDetail:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].getArticleDetail(t);case 3:if(r=e.sent,1!==+r.status){e.next=9;break}this.form.title=r.data.article.title,this.form.content=r.data.article.content,e.next=10;break;case 9:throw new Error(r.message);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message.error(e.t0.message||"文章详情获取失败，请稍后重试");case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},watch:{}},u=c,m=(r("ddb2"),r("2877")),l=Object(m["a"])(u,a,n,!1,null,"acc8f612",null);l.options.__file="createup.vue";t["default"]=l.exports},b02f:function(e,t,r){"use strict";var a=r("4e14"),n=r.n(a);n.a},ddb2:function(e,t,r){"use strict";var a=r("6021"),n=r.n(a);n.a}}]);