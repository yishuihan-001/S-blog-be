(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{da9e:function(e,t,r){"use strict";var s=r("dedd"),a=r.n(s);a.a},dedd:function(e,t,r){},fcf4:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-login container"},[r("transition",{attrs:{name:"form-fade",mode:"in-out"}},[r("section",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticClass:"l-main"},[r("div",{staticClass:"lm-title"},[r("h3",{staticClass:"cf tac f28"},[e._v("社区后台视频上传平台")])]),r("div",{staticClass:"lm-login"},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"重复密码",prop:"repassword"}},[r("el-input",{attrs:{type:"password",placeholder:"重复密码"},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[r("el-option",{attrs:{label:"男",value:"m"}}),r("el-option",{attrs:{label:"女",value:"f"}}),r("el-option",{attrs:{label:"保密",value:"x"}})],1)],1),r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{staticClass:"upload-demo",attrs:{multiple:"",limit:1,action:"string","on-success":e.handleSuccess,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"http-request":e.selfUpload,"file-list":e.fileList,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),r("el-form-item",{attrs:{label:"活动形式",prop:"bio"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.bio,callback:function(t){e.$set(e.form,"bio",t)},expression:"form.bio"}})],1),r("el-form-item",[r("el-button",{staticClass:"lml-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("ruleForm")}}},[e._v("注册")])],1)],1)],1)])])],1)},a=[],o=(r("96cf"),r("1da1")),i=r("bdaa"),n=window.va||{},l={data:function(){var e=this,t=function(t,r,s){n.isEmpty(r)?s(new Error("请输入密码")):(n.isNotEmpty(e.form.repassword)&&e.$refs.ruleForm.validateField("repassword"),s())},r=function(t,r,s){if(n.isEmpty(r))s(new Error("请再次输入密码"));else if(r!==e.form.password){if(n.isEmpty(e.form.password))return;s(new Error("两次输入密码不一致!"))}else s()};return{showLogin:!1,form:{name:"",password:"",repassword:"",gender:"",bio:""},fileList:[],formData:null,rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],repassword:[{required:!0,validator:r,trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],bio:[{required:!0,message:"请填写个人简介",trigger:"blur"}]}}},created:function(){},mounted:function(){this.showLogin=!0},components:{},computed:{},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(r){if(!r)return!1;n.isEmpty(t.formData)?t.$message.error("请上传头像"):t.register(e)})},register:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var r,s,a,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n.isEmpty(this.formData)){e.next=2;break}return e.abrupt("return",this.$message.error("请上传头像"));case 2:for(r in this.form)this.formData.append(r,this.form[r]);return s={headers:{"Content-Type":"multipart/form-data"}},e.prev=4,e.next=7,i["a"].register(this.formData,s);case 7:if(a=e.sent,1!==+a.status){e.next=16;break}this.$refs[t].resetFields(),this.formData=null,this.fileList=[],this.$message("注册成功，自动跳转到登录"),setTimeout(function(){o.$router.push("/login")},2e3),e.next=17;break;case 16:throw new Error(a.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](4),this.$message.error(e.t0.message);case 22:case"end":return e.stop()}},e,this,[[4,19]])}));return function(t){return e.apply(this,arguments)}}(),handleRemove:function(){this.formData=null,this.fileList=[]},handleSuccess:function(){},handleExceed:function(){this.$message.warning("只能上传1个头像图片哦")},selfUpload:function(e){this.formData=new FormData,this.formData.append("avatar",e.file)}},watch:{}},m=l,u=(r("da9e"),r("2877")),p=Object(u["a"])(m,s,a,!1,null,"3538c184",null);p.options.__file="register.vue";t["default"]=p.exports}}]);